import java.io.File;
import java.util.Arrays;
import java.util.Scanner;
import java.util.StringTokenizer;

import javax.swing.JPopupMenu.Separator;

public class Quiz_Dos {

	static String defaultPath = "D:" + File.separator + "temp" + File.separator;
	static String path = defaultPath;
	
	public static void main(String[] args) {
	
		System.out.println("Bitamp Microsoft Windows DOS 명령어 [Version 1.1]");
		System.out.println("2020 Bitcamp. All rights reserved\n");
	
		Scanner sc = new Scanner(System.in);
	
		String[] input = null;
	
		while (true) {
			System.out.print(path + ">");
			input = sc.nextLine().trim().split(" "); // input배열에 띄어쓰기 기준으로 각 방에 저장, 첫 번째 방 전에 공란 방지
	
			if (input[0].equalsIgnoreCase("exit")) { // 오직 exit로만 Dos 종료 가능
				System.out.println("Exit");
				System.exit(0);
				return;
			}
	
			switch (input[0].toLowerCase()) {
//			case "dir":
//				searchDirectory();
//				break;
			case "cd": // 뒤에오는 경로로 이동
			case "cd..": // 한단계 위로
			case "cd\\": // 최상위로
			case "cd/":  // "
				changeDirectory(input);
				break;
//			case "md":
//			case "mkdir":
//				makeDirectory(input);
//				break;
//			case "rd":
//			case "rmdir":
//				removeDirectory(input);
//				break;
			case "ren":
			case "rename":
				//System.out.println(Arrays.toString(input));
				renameDirectory(input);
				break;
//			case "type":
//				readTextFile(input);
//				break;
//			case "help":
//				displayHelp();
//				break;
			default:
			}
		}
	}
	
	static void changeDirectory(String[] input) {
		System.out.println("받은 파일 절대경로 : " + path + Arrays.toString(input));
		if(input[0].equals("cd..") || input[0].equals("cd\\") || input[0].equals("cd/")) {
//			System.out.println(path.split(":")[0]); 
			path = path.split(":")[0]+":"+ File.separator;
			
		}else if(input[0].equals("cd")) {
			if(input.length > 1) {
				path = path + input[1]+ File.separator;
			}
		}
//		else if (input[1].equals("\\") || input[1].equals("/")) {
//			StringTokenizer st = new StringTokenizer(Arrays.toString(input), "\\/");
//			System.out.println("쪼갬 : " + st);
//		}
		
//		if(input.length == 1 || input[1].equals("..")) {
//			File temp = new File(path);
//			path = temp.getParent();
//			System.out.println(path);
//		}else if(input[1].equals("\\") || input[1].equals("/")) {
		
//			StringTokenizer st = new StringTokenizer(Arrays.toString(input), "\\/");
//			System.out.println("쪼갬 : " + st);
//		}
	}
	static void renameDirectory(String[] input) {
		File beforeRen = new File(path + input[1] );//input[1] : 기존 파일명
		if(beforeRen.exists()) {
			File afterRen = new File(path + input[2] );//input[2] : 바꿀 파일명
			if(afterRen.exists()) {
				System.out.println("이미 존재하는 파일명입니다.");
			}else {				
				beforeRen.renameTo(afterRen);
				if(!afterRen.exists()) {
				System.out.println("error!");
				}
			}
		}else {
			System.out.println("존재하지 않는 파일입니다.");
		}
	}
}